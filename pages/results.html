<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search Results - AutoParts</title>
    <link rel="stylesheet" href="../styles/result.css">
</head>
<body>
    <div class="results-header">
        <div class="header-content">
            <div class="brand">AutoParts</div>
            <div class="search-info">Search Results</div>
            <div class="header-actions">
                <button class="back-btn" onclick="window.location.href='../pages/Homepage.html'">← Back to Search</button>
                <button class="filter-btn">Filters</button>
            </div>
        </div>
    </div>

    <div class="results-main">
        <div class="filters-sidebar">
            <h3>Filters</h3>
            <div class="filter-group">
                <h4>Price Range</h4>
                <div class="checkbox-group">
                    <label><input type="checkbox" value="500-1000"> ₹500 - ₹1000</label>
                    <label><input type="checkbox" value="1000-2000"> ₹1000 - ₹2000</label>
                    <label><input type="checkbox" value="2000+"> ₹2000+</label>
                </div>
            </div>
            <div class="filter-group">
                <h4>Brand</h4>
                <div class="checkbox-group">
                    <label><input type="checkbox" value="oem parts"> OEM Parts</label>
                    <label><input type="checkbox" value="aftermarket"> Aftermarket</label>
                    <label><input type="checkbox" value="performance"> Performance</label>
                </div>
            </div>
            <div class="filter-group">
                <h4>Condition</h4>
                <div class="checkbox-group">
                    <label><input type="checkbox" value="new"> New</label>
                    <label><input type="checkbox" value="used"> Used</label>
                    <label><input type="checkbox" value="refurbished"> Refurbished</label>
                </div>
            </div>
            <div class="filter-group">
                <h4>Availability</h4>
                <div class="checkbox-group">
                    <label><input type="checkbox" value="in stock"> In Stock</label>
                    <label><input type="checkbox" value="fast shipping"> Fast Shipping</label>
                </div>
            </div>
        </div>

        <div class="results-grid">
            <div class="results-header-bar">
                <div class="results-count">6 results found</div>
                <div class="sort-options">
                    <label for="sort">Sort by</label>
                    <select id="sort">
                        <option>Relevance</option>
                        <option>Price: Low to High</option>
                        <option>Price: High to Low</option>
                        <option>Customer Rating</option>
                        <option>Newest First</option>
                    </select>
                </div>
            </div>

            <div class="products-grid">
                <div class="product-card" onclick="window.location.href='../pages/partdetails.html?partId=1'">
                    <div class="product-image">
                        <img src="../images/brakepad.png" alt="Brake Pads">
                    </div>
                    <div class="product-info">
                        <div class="product-name">Brake Pads</div>
                        <div class="product-pricing">
                            <span class="current-price">₹800</span>
                        </div>
                        <div class="product-brand">OEM Parts</div>
                        <div>Condition: New</div>
                        <div class="product-shipping">In Stock</div>
                    </div>
                </div>
                <div class="product-card" onclick="window.location.href='../pages/partdetails.html?partId=2'">
                    <div class="product-image">
                        <img src="../images/airfilter.png" alt="AirFilter">
                    </div>
                    <div class="product-info">
                        <div class="product-name">AirFilter</div>
                        <div class="product-pricing">
                            <span class="current-price">₹500</span>
                        </div>
                        <div class="product-brand">Performance</div>
                        <div>Condition: Refurbished</div>
                        <div class="product-shipping">In Stock</div>
                    </div>
                </div>
                <div class="product-card" onclick="window.location.href='../pages/partdetails.html?partId=3'">
                    <div class="product-image">
                        <img src="../images/clutchplate.png" alt="Clutchplate">
                    </div>
                    <div class="product-info">
                        <div class="product-name">Clutchplate</div>
                        <div class="product-pricing">
                            <span class="current-price">₹2000</span>
                        </div>
                        <div class="product-brand">Performance</div>
                        <div>Condition: Refurbished</div>
                        <div class="product-shipping">In Stock</div>
                    </div>
                </div>
                <div class="product-card">
                    <div class="product-image">
                        <img src="../images/sparkplug.png" alt="Spark Plugs">
                    </div>
                    <div class="product-info">
                        <div class="product-name">Spark Plugs</div>
                        <div class="product-pricing">
                            <span class="current-price">₹400</span>
                        </div>
                        <div class="product-brand">OEM Parts</div>
                        <div>Condition: New</div>
                        <div class="product-shipping">In Stock</div>
                    </div>
                </div>
                
                <div class="product-card">
                    <div class="product-image">
                        <img src="../images/headlight.png" alt="Headlight">
                    </div>
                    <div class="product-info">
                        <div class="product-name">Headlight</div>
                        <div class="product-pricing">
                            <span class="current-price">₹2500</span>
                        </div>
                        <div class="product-brand">Performance</div>
                        <div>Condition: Refurbished</div>
                        <div class="product-shipping">In Stock</div>
                    </div>
                </div>
            </div>

            <div class="pagination">
                <button class="page-btn" disabled>← Previous</button>
                <div class="page-numbers">
                    <button class="page-btn active">1</button>
                    <button class="page-btn">2</button>
                    <button class="page-btn">3</button>
                    <span>...</span>
                    <button class="page-btn">12</button>
                </div>
                <button class="page-btn">Next →</button>
            </div>
        </div>
    </div>

    <script>
        // Toggle filters sidebar visibility
        const filterBtn = document.querySelector('.filter-btn');
        const filtersSidebar = document.querySelector('.filters-sidebar');
        const resultsMain = document.querySelector('.results-main');
        filterBtn.addEventListener('click', () => {
            filtersSidebar.classList.toggle('hidden');
            resultsMain.classList.toggle('no-filters');
            filterBtn.textContent = filtersSidebar.classList.contains('hidden') ? 'Show Filters' : 'Hide Filters';
        });

        // Filter functionality
        const checkboxes = document.querySelectorAll('.filters-sidebar input[type="checkbox"]');
        const resultsCount = document.querySelector('.results-count');
        checkboxes.forEach(checkbox => {
            checkbox.addEventListener('change', filterProducts);
        });

        function filterProducts() {
            const products = document.querySelectorAll('.product-card');
            const checkedPrices = Array.from(document.querySelectorAll('.filter-group:nth-child(1) input:checked')).map(ch => ch.value);
            const checkedBrands = Array.from(document.querySelectorAll('.filter-group:nth-child(2) input:checked')).map(ch => ch.value.toLowerCase());
            const checkedConditions = Array.from(document.querySelectorAll('.filter-group:nth-child(3) input:checked')).map(ch => ch.value.toLowerCase());
            const checkedAvailabilities = Array.from(document.querySelectorAll('.filter-group:nth-child(4) input:checked')).map(ch => ch.value.toLowerCase());

            let visibleCount = 0;

            products.forEach(product => {
                let show = true;

                const priceStr = product.querySelector('.current-price').textContent.replace('₹', '');
                const price = parseInt(priceStr, 10);
                const brand = product.querySelector('.product-brand').textContent.toLowerCase();
                const conditionStr = product.querySelector('.product-info div:nth-child(4)').textContent;
                const condition = conditionStr.replace('Condition: ', '').toLowerCase();
                const availability = product.querySelector('.product-shipping').textContent.toLowerCase();

                // Price filter
                if (checkedPrices.length > 0) {
                    let matchesPrice = false;
                    checkedPrices.forEach(range => {
                        if (range === '500-1000' && price >= 500 && price <= 1000) matchesPrice = true;
                        else if (range === '1000-2000' && price >= 1000 && price <= 2000) matchesPrice = true;
                        else if (range === '2000+' && price > 2000) matchesPrice = true;
                    });
                    if (!matchesPrice) show = false;
                }

                // Brand filter
                if (checkedBrands.length > 0 && !checkedBrands.includes(brand)) show = false;

                // Condition filter
                if (checkedConditions.length > 0 && !checkedConditions.includes(condition)) show = false;

                // Availability filter
                if (checkedAvailabilities.length > 0 && !checkedAvailabilities.includes(availability)) show = false;

                product.style.display = show ? '' : 'none';
                if (show) visibleCount++;
            });

            // Update results count
            resultsCount.textContent = `${visibleCount} results found`;
        }
    </script>
</body>
</html>